<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Professional Fixtures</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
<style>
body.fixtures-body {
    background: linear-gradient(135deg, #43cea2, #185a9d);
    min-height: 100vh;
    margin: 0;
    padding-bottom: 80px; /* space for sticky buttons */
}

#fixture-list-wrapper {
    max-width: 800px;
    margin: 20px auto;
    padding: 20px;
    background: #fff;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}

.round-list {
    list-style-type: none;
    padding-left: 0;
}

.match-item {
    background: #f8f9fa;
    margin-bottom: 10px;
    padding: 10px;
    border-radius: 5px;
    font-weight: bold;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.match-item strong {
    color: #007bff;
}

.round-title {
    font-weight: bold;
    margin-top: 20px;
    margin-bottom: 15px;
    font-size: 1.5em;
    color: #333;
    border-bottom: 2px solid #ddd;
    padding-bottom: 5px;
}

/* Print-specific styling */
@media print {
    body * {
        visibility: hidden;
    }
    #fixture-list-wrapper, #fixture-list-wrapper * {
        visibility: visible;
    }
    #fixture-list-wrapper {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        box-shadow: none;
        background: #fff;
    }
    .btn-bottom {
        display: none;
    }
}
</style>
</head>
<body class="fixtures-body">

<div class="container-fluid text-center">
    <h1 class="mb-4">üèÜ {{ tournament_name }}</h1>
    <h2 class="mb-4">{{ ttype|capitalize }} Fixtures</h2>

    <div id="fixture-list-wrapper">
        {% for matches in fixtures_rounds %}
            <div class="round-title">
                {% if loop.index0 == fixtures_rounds|length - 1 %}
                    Final
                {% elif loop.index0 == fixtures_rounds|length - 2 and fixtures_rounds|length > 2 and not (fixtures_rounds|length == 4 or fixtures_rounds|length == 3) %}
                    Semi-Finals
                {% else %}
                    Round {{ loop.index }}
                {% endif %}
            </div>
            <ul class="round-list">
                {% for match in matches %}
                    <li class="match-item">
                        <span>{{ match[0] }}</span> <strong>vs</strong> <span>{{ match[1] }}</span>
                    </li>
                {% endfor %}
            </ul>
        {% endfor %}
    </div>

    <div class="btn-bottom">
        <a href="{{ url_for('index') }}" class="btn btn-primary me-2">‚¨Ö Back</a>
        <button id="export-png" class="btn btn-info">Export PNG</button>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<script>
// This section has been removed from this file to prevent conflicts
// and is now only in knockout_fixtures.html
function exportBracketPNG() {
    const node = document.getElementById('fixture-list-wrapper');
    const originalBg = document.body.style.background;
    document.body.style.background = 'linear-gradient(135deg, #e0eafc, #cfdef3)';

    html2canvas(node, {scale:2, backgroundColor: null}).then(canvas => {
        const link = document.createElement('a');
        link.download = 'fixtures.png';
        link.href = canvas.toDataURL('image/png');
        link.click();
        document.body.style.background = originalBg;
    });
}

document.getElementById('export-png').addEventListener('click', exportBracketPNG);
</script>

</body>
</html>